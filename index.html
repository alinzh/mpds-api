<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Materials Platform for Data Science" />
<meta property="og:site_name" content="MPDS.IO"/>
<meta property="og:description" content="Online PAULING FILE materials database with nearly 2 million data entries (physical properties, crystal structures, phase diagrams) available via API, ready for modern data-intensive applications." />
<meta property="og:image" content="https://mpds.io/wm_logo_opt.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="225" />
<meta property="og:image:height" content="224" />
<meta property="og:url" content="https://mpds.io">
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@mpdsio" />
<meta name="twitter:title" content="Materials Platform for Data Science" />
<meta name="twitter:creator" content="@tildepro" />
<meta name="twitter:image" content="https://mpds.io/wm_logo_opt.png" />
<meta name="twitter:image:alt" content="Online materials data-mining platform" />
<meta name="twitter:description" content="Online PAULING FILE materials database with nearly 2 million data entries (physical properties, crystal structures, phase diagrams) available via API, ready for modern data-intensive applications." />
<meta name="description" content="Online PAULING FILE materials database with nearly 2 million data entries (physical properties, crystal structures, phase diagrams) available via API, ready for modern data-intensive applications." />
<meta name="keywords" content="materials platform, physical properties, phase diagrams, crystalline structures, materials database, PAULING FILE" />
<meta name="subject" content="materials informatics" />
<meta name="url" content="https://mpds.io" />
<meta name="rating" content="General" />
<meta name="author" content="feedback@tilde.pro" />
<meta name="robots" content="notranslate" />
<title>MPDS API Docs</title>
<style>
/* COMMON */

*{font-family:Georgia;margin:0;padding:0;}
html, body{height:100%;}
sup, sub{font-size:12px;}
body.sky{
background:-webkit-linear-gradient(top, #DBF2FF 0%, #fff 10%);
background:-linear-gradient(top, #DBF2FF 0%, #fff 10%);
background:-ms-linear-gradient(top, #DBF2FF 0%, #fff 10%);
background:-moz-linear-gradient(top, #DBF2FF 0%, #fff 10%);
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#DBF2FF, endColorstr=#ffffff, GradientType=0);
background-attachment:fixed;
}
#overlay{display:none;position:fixed;left:0;top:0;width:100%;height:100%;text-align:center;z-index:100;background:#fff;opacity:0.75;overflow:hidden;}

/* COMMON NAVBAR START */

#nav{position:fixed;top:0;left:0;height:34px;z-index:101;background:#fff;font-size:0.9em;padding:0 3px;border-bottom-right-radius:4px;line-height:33px;border-bottom:1px solid #888;border-right:1px solid #888;cursor:pointer;box-shadow:6px 6px 4px -3px rgba(0,0,0,0.4);}
#nav li{list-style:none;float:left;font-weight:bold;margin:0 7px;}
#nav a{text-decoration:none;color:#555;font-family:Arial;}
#nav a:hover{border-bottom:1px solid #000;}
li.nav_fluid{display:none;}

/* COMMON NAVBAR END */

#menu{display:none;position:fixed;left:0;top:178px;width:12.5%;height:auto;z-index:100;}
#menu li{text-align:left;list-style:none;letter-spacing:-0.5px;}
#menu a{display:block;}
#menu > ul > li a{text-decoration:none;color:#900;border-bottom:1px solid #900;padding:4px 0;font-size:2.15vmin;padding-left:5px;line-height:2.5vmin;}
#menu > ul > li a:hover, #menu > ul > li a.active {color:#fff;background:#900;}
#menu > ul > li > ul > li a{text-decoration:none;color:#3e3f95;border-bottom:1px solid #3e3f95;padding:4px 0;font-size:1.8vmin;padding-left:18px;line-height:2.25vmin;}
#menu > ul > li > ul > li a:hover, #menu > ul > li > ul > li a.active {color:#fff;background:#3e3f95;}

.wmbutton{cursor:pointer;font-size:1.2em;font-weight:normal;text-align:center;border:1px solid #3e3f95;text-align:center;background:#3e3f95;color:#fff;line-height:1.4em;border-radius:2px;text-decoration:none;box-shadow:inset 0 2px 2px rgba(255,255,255,0.3), inset 0 -2px 2px rgba(0,0,0,0.3), inset 0 20px 10px rgba(255,255,255,0.3), 0 0 2px 1px rgba(0,0,0,0.2), 0 2px 2px rgba(0,0,0,0.3);}

div.modal_dialogue{position:fixed;top:10%;left:50%;border-radius:4px;border:1px solid #999;box-shadow:15px 15px 10px -5px rgba(0,0,0,0.4);}
div.cross{float:right;width:16px;height:16px;font-size:10px;text-align:center;cursor:pointer;background:url(data:image/gif;base64,R0lGODlhEAAQAJEAAAAAAP///1VVVf///yH5BAEAAAMALAAAAAAQABAAAAIjnI+py6L+BDRy0gqxHVqvLjGcJ3Yl+IEhQpLX+m7wMYv2PRQAOw==) no-repeat;}
span.href{cursor:pointer;text-decoration:none;color:#3e3f95;border-bottom:1px solid #3e3f95;}

#response{white-space:pre;}
#logo_bg{display:none;width:250px;height:250px;position:fixed;z-index:-1;right:5px;bottom:20px;background:url(https://raw.githubusercontent.com/mpds-io/datascience/gh-pages/mpds.png) left top no-repeat;background-size:100%;opacity:0.1;}
#notifybox{z-index:201;position:fixed;top:12px;right:4px;min-width:150px;background:#fc6;border-radius:5px;padding:20px 25px;font-size:1.2em;line-height:1.45em;}
#main{width:100%;min-height:100%;height:auto !important;height:100%;margin-bottom:-33px;}
h1{font-size:100%;font-weight:normal;display:inline;}
h2, h3{line-height:2.2em;font-size:1.6em;font-weight:bold;color:#3e3f95;}
h2:first-letter , h3:first-letter {color:#900;}
h3{line-height:2.2em;font-size:1.2em;}

div.spacer{width:790px;margin:0 auto;height:1px;border-top:1px solid #ccc;}

#content{width:790px;margin:0 auto;background:#fff;padding:0 15px 40px;border-radius:50px;}
#content > p{font-size:1em;line-height:1.7em;color:#666;margin:20px 0;padding:10px 5px;border-radius:4px;background:#f9f9f9;}
#content > p:first-letter {font-size:1.6em;font-weight:bold;}
#content a{color:#222;text-decoration:none;border-bottom:1px solid #222;}
#content > table{width:auto;margin:20px 0;font-size:0.9em;text-align:left;color:#666;border-collapse:collapse;border-spacing:0;}
#content > table td{line-height:2em;border:1px solid #ddd;padding:4px 2px;}
#content > table th{line-height:2.2em;border:1px solid #ddd;background:#f6f6f6;padding:4px 2px;}
span.t{font-family:'Courier New';background:#aaa;color:#fff;padding:1px 2px;}

div.blackbg{background:#2b2b2b;font-size:0.9em;color:#fff;font-family:'Courier New';line-height:1.6em;margin:20px 0;padding:10px 5px;border-radius:4px;white-space:pre;}
div.caption{text-align:center;font-size:0.9em;line-height:2em;color:#666;margin:20px 0 30px;font-style:italic;}
div.caption b{font-style:normal;}

/* LOGOS */

#landing_box{width:590px;margin:0 auto;height:170px;padding:20px 0;}
#logo_l{float:left;width:230px;margin-left:25px;font-size:3em;text-align:right;padding-top:38px;letter-spacing:24px;color:#555;font-weight:normal;}
#logo{float:left;width:140px;height:130px;background:url(https://raw.githubusercontent.com/mpds-io/datascience/gh-pages/mpds.png) center center no-repeat;background-size:85%;}
#logo_r{float:left;width:165px;margin-left:15px;font-size:1.2em;line-height:1.3em;text-align:left;font-weight:normal;padding-top:42px;color:#555;}
#motto{clear:both;width:100%;height:33px;text-align:left;padding-top:20px;padding-left:80px;letter-spacing:0.5px;font-size:0.95em;color:#333;}
#motto a{text-decoration:none;color:#333;border-bottom:1px solid #333;}

/* FOOTER */
/* HEIGHT 32px */

#footer{width:100%;height:24px;padding-top:8px;text-align:center;font-size:0.85em;color:#888;background:#f6f6f6;border-top:1px solid #888;}
#footer a{text-decoration:none;color:#888;border-bottom:1px solid #888;}
#twitter{position:fixed;z-index:3;bottom:0;left:0;width:13.5%;height:32px;text-align:center;}
#twitter a{text-decoration:none;font-size:0.85em;color:#888;line-height:32px;border-bottom:1px solid #888;font-family:Georgia;}

/* MEDIA-QUERIES */

@media all and (min-width:1000px){
#menu{display:block;}
li.nav_fluid {display:inline-block;}
}

/* DOCSON */

.docson {
font-family: 'Droid Sans',verdana,helvetica;font-size: 13px;padding: 6px 6px 6px 6px;
}
.docson .box {
position: relative;float: left;background-color:rgba(255, 255, 255, 0.2);border: 1px solid lightgrey;border-radius: 4px;-moz-border-radius: 4px;-webkit-border-radius: 4px;padding-bottom: 10px;-moz-box-shadow:    1px 1px 1px darkgray;-webkit-box-shadow: 1px 1px 1px darkgray;box-shadow:         1px 1px 1px darkgray;
}
.docson .expand-button {
position: absolute;margin-top: 15px;padding: 2px;right: 2px;float: right;width: 18px;text-align: center;cursor: pointer;font-weight: bold;font-family: "Lucida Console", Monaco, monospace;font-size: 15px;color: darkgray;display: none;
}
.docson .source-button {
position: absolute;padding: 2px;margin-top: 3px;right: 2px;width: 18px;text-align: center;cursor: pointer;font-weight: bold;font-family: "Lucida Console", Monaco, monospace;font-size: 10px;color: darkgray;display: none;
}
.docson .box-header {
padding: 6px;border-top-left-radius: 4px;border-top-right-radius: 4px;border-bottom: 1px solid lightgrey;background: whitesmoke;
}
.docson .box-name {
color: darkblue;padding: 5px 40px 2px 3px;float: left;
}
.docson .title {
margin-top: -3px;font-size: 120%;
}
.docson .link {
text-decoration: underline;
}
.docson .box-description {
color: dimgray;float: left;max-width: 600px;
}
.docson .end {
clear: both;
}
.docson .error {
color: red;
}
.docson .box-body {
padding-left: 10px;padding-right: 28px;clear: both;
}
.docson .box-1 {
background: whitesmoke;
}
.docson .box-2 {
background: beige;background: -webkit-linear-gradient(white, beige, beige, gainsboro);background: -moz-linear-gradient(white, beige, beige, gainsboro);
}
.docson .box-3 {
background: azure;background: -webkit-linear-gradient(white, azure, azure, gainsboro);background: -moz-linear-gradient(white, azure, azure, gainsboro);
}
.docson .box-4 {
background: mistyrose;background: -webkit-linear-gradient(white, mistyrose, mistyrose, gainsboro);background: -moz-linear-gradient(white, mistyrose, mistyrose, gainsboro);
}
.docson .box-5 {
background: #ddffee;background: -webkit-linear-gradient(white, #ddffee, #ddffee, gainsboro);background: -moz-linear-gradient(white, #ddffee, #ddffee, gainsboro);
}
.docson .box-6 {
background: ghostwhite;background: -webkit-linear-gradient(white, ghostwhite, ghostwhite, gainsboro);background: -moz-linear-gradient(white, ghostwhite, ghostwhite, gainsboro);
}
.docson .box-7 {
background: lavenderblush;background: -webkit-linear-gradient(white, lavenderblush, lavenderblush, gainsboro);background: -moz-linear-gradient(white, lavenderblush, lavenderblush, gainsboro);
}
.docson .box-8 {
background: aliceblue;background: -webkit-linear-gradient(white, aliceblue, aliceblue, gainsboro);background: -moz-linear-gradient(white, aliceblue, aliceblue, gainsboro);
}
.docson .signature {
padding-top: 5px;clear: left;
}
.docson .signature-header {
padding-top: 3px;height: 20px;line-height: 24px;
}
.docson .property-name {
float: left;font-family: "Lucida Console", Monaco, monospace;min-width: 130px;
}
.docson .required {
font-weight: bold;
}
.docson .type-keyword {
font-size: 80%;color: dimgray;
}
.docson .type-pattern {
font-size: 80%;color: darkolivegreen;
}
.docson .type-enum {
color: purple;font-family: "Lucida Console", Monaco, monospace;font-size: 90%;padding-left: 2px;
}
.docson .type-default {
color: darkslategrey;font-family: "Lucida Console", Monaco, monospace;
}
.docson .signature-type {
padding-left: 6px;float: left;min-width: 160px;max-width: 320px;
}
.docson .signature-type-any {
font-style: italic;
}
.docson .signature-type-string {
color: green;
}
.docson .signature-type-number {
color: blue;
}
.docson .signature-type-integer {
color: blueviolet;
}
.docson .signature-type-boolean {
color: orangered;
}
.docson .signature-type-null {
font-family: "Lucida Console", Monaco, monospace;color: red;
}
.docson .signature-type-date-time {
color: #224466;
}
.docson .signature-type-email {
color: cornflowerblue;
}
.docson .signature-type-hostname {
color: darkolivegreen;
}
.docson .signature-type-ipv6 {
color: darkslateblue;
}
.docson .signature-type-ipv4 {
color: indigo;
}
.docson .signature-type-uri {
color: saddlebrown;
}
.docson .signature-button {
cursor: pointer;padding: 4px;border-radius: 4px;border: 1px solid lightgrey;-moz-border-radius: 4px;
}
.docson .signature-type-ref {
color: darkblue;
}
.docson .signature-type-expanded {
padding: 5px 3px 3px 5px;vertical-align: -1px;opacity: 0.6;-moz-box-shadow:    inset 1px 1px 1px darkgray;-webkit-box-shadow: inset 1px 1px 1px darkgray;box-shadow:         inset 1px 1px 1px darkgray;
}
.docson .signature-description {
padding-left: 6px;padding-bottom: 3px;color: dimgray;float: left;max-width: 600px;
}
.docson .signature-box-container {
clear: both;
}
.docson .box-container {
float: left;padding-top: 4px;padding-left: 8px;display: none;
}
.docson .button {
-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;
}
.docson .button:hover {
color: darkred;
}
@media all and (min-width: 20px) and (max-width: 500px) {
.docson .property-name {min-width: 0px;}
.docson .signature-type {min-width: 0px;}
.docson .source {width: 100%;}
.docson .box-container, .box {width: 100%;}
}
.docson .desc {
padding-left: 6px;line-height: 17px;
}
.docson .desc p {
margin: 0;margin-top: 3px;
}
.docson .desc code {
color: purple;font-size: 90%;
}

.docson .desc table {
margin-top: 4px;margin-bottom: 4px;border-collapse:collapse;
}
.docson .desc th {
padding: 0px;font-size: 80%;font-weight: normal;background: rgba(231, 231, 231, 0.5);
}
.docson .desc table,
.docson .desc th,
.docson .desc td {
border: 1px solid lightgrey;
}
.docson .desc tr > td {
padding: 2px 6px 2px 6px;
}
.docson .desc h1 {
font-size: 120%;margin-top: 0px;margin-bottom: 3px;
}
.docson .desc h2 {
font-size: 115%;margin-top: 0px;margin-bottom: 3px;
}
.docson .desc h3 {
font-size: 110%;margin-top: 0px;margin-bottom: 3px;
}
.docson .desc h4 {
font-size: 100%;margin-top: 0px;margin-bottom: 3px;
}
.docson .desc pre {
border: 1px solid lightgray;border-radius: 4px;-webkit-border-radius: 4px;-moz-border-radius: 4px;padding: 4px;margin: 3px 0px;
}
.docson .desc ul {
padding-left: 16px;margin: 3px 0px;
}
.docson .desc ol {
padding-left: 16px;margin: 3px 0px;
}
.docson .desc blockquote {
margin: 3px 0px 3px 10px;padding-left: 6px;border-left: 1px solid lightgray;
}
.docson .desc img {
vertical-align: middle;
}
.docson .desc hr {
border: 0;height: 1px;background: lightgrey;color: lightgrey;width: 50%;
}
.docson .source {
display: none;padding-left: 16px;padding-right: 30px;
}
.docson .json, .json-schema {
font-family: "Lucida Console", Monaco, monospace;
}
.docson .json-punctuation {
font-weight: bold;
}
.docson .json-null, .json-true, .json-false {
font-weight: bold;
}
.docson .json-true {
color: #080;
}
.docson .json-false {
color: #800;
}
.docson .json-object-key {
color: #246;
}
.docson .json-keyword {
font-weight: bold;color: #036;
}
.docson .json-number {
font-weight: bold;color: #660;
}
.docson .json-string {
color: #800;
}
.docson .json-schema-map > .json-object-key {
color: #080;font-style: italic;
}

/* Code highlighting */

.hljs {
display: block;
overflow-x: auto;
padding: 0.5em;
color: #fff;
background:#2b2b2b;font-size:0.9em;font-family:'Courier New';line-height:1.6em;border-radius:4px;
}

.hljs-strong,
.hljs-emphasis {
color: #a8a8a2;
}

.hljs-bullet,
.hljs-quote,
.hljs-link,
.hljs-number,
.hljs-regexp,
.hljs-literal {
color: #6896ba;
}

.hljs-code,
.hljs-selector-class {
color: #a6e22e;
}

.hljs-emphasis {
font-weight: bold;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-section,
.hljs-attribute,
.hljs-name,
.hljs-variable {
color: #cb7832;
}

.hljs-params {
color: #b9b9b9;
}

.hljs-string {
color: #6a8759;
}

.hljs-subst,
.hljs-type,
.hljs-built_in,
.hljs-builtin-name,
.hljs-symbol,
.hljs-selector-id,
.hljs-selector-attr,
.hljs-selector-pseudo,
.hljs-template-tag,
.hljs-template-variable,
.hljs-addition {
color: #e0c46c;
}

.hljs-comment,
.hljs-deletion,
.hljs-meta {
color: #7f7f7f;
}

/* "Fork me on GitHub" CSS ribbon v0.1.1 */

.github-fork-ribbon {
position: fixed;
padding: 2px 0;
background-color: #900;
background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, 0)), to(rgba(0, 0, 0, 0.15)));
background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
background-image: -moz-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
background-image: -ms-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
background-image: -o-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
-webkit-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
-moz-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
font: 500 9px "Helvetica Neue", Helvetica, Arial, sans-serif;
z-index: 9999;
pointer-events: auto;
}
.github-fork-ribbon a,
.github-fork-ribbon a:hover {
color: #fff;
text-decoration: none;
text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
text-align: center;
width: 100px;
line-height: 12px;
display: inline-block;
padding: 2px 0;
border-width: 1px 0;
border-style: dotted;
border-color: #fff;
border-color: rgba(255, 255, 255, 1);
}
.github-fork-ribbon-wrapper {
width: 100px;
height: 100px;
position: fixed;
overflow: hidden;
top: 0;
z-index: 9999;
pointer-events: none;
}
.github-fork-ribbon-wrapper.right {
right: 0;
}
.github-fork-ribbon-wrapper.right .github-fork-ribbon {
top: 16px;
right: -22px;
-webkit-transform: rotate(45deg);
-moz-transform: rotate(45deg);
-ms-transform: rotate(45deg);
-o-transform: rotate(45deg);
transform: rotate(45deg);
}
</style>
<!--[if lt IE 9]>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.1.1/gh-fork-ribbon.ie.min.css" />
<![endif]-->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
<script type="text/javascript" src="/webassets/js/jquery.nearest.min.js"></script>
<script type="text/javascript" src="/webassets/js/require.min.js"></script>
<script type="text/javascript">
if (!window.console) window.console = {log: function(){}, error: function(){}};

function load_custom_schema(addr, el){
    $.get(addr).done(function(schema){
        for (var type in schema.definitions){
            try {
                docson.doc("schema_" + type, schema.definitions[type]);
            } catch (e){
                console.error("Could not parse JSON schema!");
            }
        }
    }).fail(function(xhr, status, err){
        console.error("Could not load JSON schema");
    });
}

function debounce(func, wait, immediate){
    var timeout;
    return function(){
        var context = this,
            args = arguments;
        var later = function(){
            timeout = null;
            if (!immediate) func.apply(context, args);
        }
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) func.apply(context, args);
    }
}

function is_inview(element){
    var pageTop = $(window).scrollTop(),
        pageBottom = pageTop + $(window).height(),
        elementTop = $(element).offset().top,
        elementBottom = elementTop + $(element).height();
    return ((elementTop <= pageBottom) && (elementBottom >= pageTop));
}

function update_menu(){
    $('#menu a').removeClass('active');
    var tol = 3, cnt = 0;
    $('#content .view').each(function(){
        if (is_inview(this)){
            var h3 = $(this).nearest('h3', {onlyY: true, directionConstraints: ['top']}).attr('id');
            var h2 = $(this).nearest('h2', {onlyY: true, directionConstraints: ['top']}).attr('id');
            $('#menu a[href="#' + h3 + '"]').addClass('active');
            $('#menu a[href="#' + h2 + '"]').addClass('active');
            cnt++;
            if (cnt == tol) return false;
        }
    });
}

$(document).ready(function(){
    if ($('#menu').is(':visible')){
        var menu = '<ul>';
        $('h2, h3').each(function(){
            var that = $(this),
                active_cls = '',
                hlevel = that.prop('tagName'),
                value = that.text(),
                href = that.attr('id');
            if (is_inview(that)) active_cls = ' class="active"';

            if (hlevel == 'H2') menu += '<li><a' + active_cls + ' href="#' + href + '">' + value + '</a></li>';
            else if (hlevel == 'H3') menu += '<li><ul><li><a' + active_cls + ' href="#' + href + '">' + value + '</a></li></ul></li>';
        });
        menu += '</ul>';
        $('#menu').append(menu);

        $(window).scroll(debounce(update_menu, 300));
    }

    require(['webassets/js/docson'], function(docson){
        load_custom_schema('/mpds.schema.json', 'mpds_json_schema');
    });
});

hljs.initHighlightingOnLoad();
</script>
</head>
<body class="sky">

    <div id="nav"><ul>
        <li><a href="https://mpds.io/#start">Start</a></li>
        <li class="nav_fluid"><a href="http://datascience.mpds.io">Manual</a></li>
        <li class="nav_fluid"><a href="http://developer.mpds.io">API</a></li>
        <li><a href="https://mpds.io/#products">Products</a></li>
    </ul></div>

    <div id="menu"></div>

    <div id="main">
        <div id="landing_box">
            <div id="logo_l">MPDS</div><div id="logo"></div><div id="logo_r"><h1>Materials Platform<br />for Data Science</h1></div>
            <div id="motto">based on the <a href="http://paulingfile.com" target="_blank" rel="noopener noreferrer">PAULING FILE</a> experimental inorganic database</div>
        </div>

        <div class="spacer"></div>

        <div id="content">
            <p style="background:#DBF2FF;">Dear developers! We are happy to welcome you here. To use the MPDS API you will need a valid API key from your <a href="https://mpds.io/#modal/menu">MPDS account</a>. Please, <a href="mailto:sales@tilde.pro">contact us</a> if you do not have an account.</p>

            <p>The MPDS API described below presents all the scientific data of the <a href="http://paulingfile.com" target="_blank">PAULING FILE</a> materials database online in the developer-friendly machine-readable formats, <i>e.g.</i> <strong>JSON</strong>, <strong>CIF</strong> <i>etc.</i></p>

            <h2 id="Downloading-data">&sect;1. Downloading data</h2>

            <h3 id="Overview-1">&sect;1.1. MPDS data structure</h3>

            <p class="view">The standard unit of the MPDS data is an <strong>entry</strong>. All the MPDS entries are subdivided into three kinds: <strong>crystalline structures</strong>, <strong>physical properties</strong>, and <strong>phase diagrams</strong>. They are called S-, P- or C-entries, correspondingly. Entries have persistent identifiers (analogous to DOIs), <i>e.g.</i> <span class="t">S377634</span>, <span class="t">P600028</span>, <span class="t">C100027</span>.</p>

            <p class="view">Another dimension of the MPDS data is the <strong>distinct phases</strong>. The three kinds of entries are interlinked via the distinct materials phases they belong. A tremendous work was done by PAULING FILE in the past 20 years to manually distinguish more than 100&nbsp;000 inorganic materials phases, appearing in the literature. Each phase has a unique combination of (<i>a</i>) chemical formula, (<i>b</i>) space group, (<i>c</i>) Pearson symbol. Each phase has an integer identifier called <span class="t">phase_id</span>.</p>

            <h3 id="Categories">&sect;1.2. Categories of data</h3>

            <p class="view">The most common action is to get the MPDS data according to some criteria. We support 10 basic criteria for searching and downloading the entries:</p>

            <table class="view">
                <thead>
                    <tr>
                    <th>Criterion</th>
                    <th>Machine-readable name</th>
                    <th>Examples</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                    <td>Physical properties (from <a href="https://mpds.io/#hierarchy">MPDS physical properties hierarchy</a>)</td>
                    <td><span class="t">props</span></td>
                    <td><span class="t">conductivity</span></td>
                    </tr>
                    <tr>
                    <td>Chemical elements</td>
                    <td><span class="t">elements</span></td>
                    <td><span class="t">Cs</span>, <span class="t">Fr, O</span></td>
                    </tr>
                    <tr>
                    <td>Materials classes (various classes under the same name: <i>i.e.</i> minerals, chemical groups, common terms <i>etc.</i>)</td>
                    <td><span class="t">classes</span></td>
                    <td><span class="t">perovskite</span>, <span class="t">bcc</span></td>
                    </tr>
                    <tr>
                    <td>Crystal system</td>
                    <td><span class="t">lattices</span></td>
                    <td><span class="t">orthorhombic</span></td>
                    </tr>
                    <tr>
                    <td>Chemical formula</td>
                    <td><span class="t">formulae</span></td>
                    <td><span class="t">SrTiO3</span>, <span class="t">O3Al2</span></td>
                    </tr>
                    <tr>
                    <td>Space group (number or Hermann-Mauguin notation)</td>
                    <td><span class="t">sgs</span></td>
                    <td><span class="t">Pm3m</span>, <span class="t">221</span></td>
                    </tr>
                    <tr>
                    <td>Prototype system ("Strukturbericht" or MPDS notation: formula, Pearson symbol, space group number)</td>
                    <td><span class="t">protos</span></td>
                    <td><span class="t">D51</span>,<br /><span class="t">SiS2 oI12 72</span></td>
                    </tr>
                    <tr>
                    <td>Publication author</td>
                    <td><span class="t">authors</span></td>
                    <td><span class="t">Evarestov</span></td>
                    </tr>
                    <tr>
                    <td>CODEN (code of publication journal, see <a href="http://cassi.cas.org">CODEN index</a>)</td>
                    <td><span class="t">codens</span></td>
                    <td><span class="t">PPCPFQ</span></td>
                    </tr>
                    <tr>
                    <td>Publication years</td>
                    <td><span class="t">years</span></td>
                    <td><span class="t">1960-1990</span></td>
                    </tr>
                </tbody>
            </table>

            <div class="caption"><b>Table 1.</b> Categories of the MPDS data.</div>

            <p class="view">Thus, in an API request it is possible to combine all these criteria in a reasonable manner. Combination is always done implying conjunctive <span class="t">AND</span> operator. The reasonable manner means one can combine <i>e.g.</i> <strong>publication authors</strong> with <strong>publication years</strong>, but cannot combine <strong>chemical formulae</strong> with <strong>chemical elements</strong> or <strong>space group</strong> with <strong>crystal system</strong>, <i>i.e.</i> the common sense rules are implied.</p>

            <h3 id="REST-endpoint">&sect;1.3. REST-alike download endpoint</h3>

            <p class="view">To serve data we employ the <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a>-alike endpoint, following the <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> protocol basics. We support input parameters in the query string and request header. We provide the <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">standard HTTP status codes</a> in response. The address of the data download endpoint is the following:</p>

            <div class="blackbg">https://api.mpds.io/v0/download/facet</div>

            <p class="view">The HTTP verb to be used is always <span class="t">GET</span>. The header must always contain the <span class="t">Key</span> string with the valid MPDS API key, obtained from the corresponding <a href="https://mpds.io/#modal/menu">MPDS account</a>. A minimal <span class="t">curl</span> example looks:</p>

            <div class="blackbg">curl -H Key:a_long_secret_string https://api.mpds.io/v0/download/facet</div>

            <p class="view">The following query string parameters are supported:</p>

            <table class="view">
                <thead>
                    <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                    <td><span class="t">q</span></td>
                    <td><span class="t">JSON-serialized object</span></td>
                    <td>The object <span class="t">q</span> may contain any reasonable combination of criteria, given in the Table 1, column "Machine-readable name". Always required.</td>
                    </tr>
                    <tr>
                    <td><span class="t">phases</span></td>
                    <td><span class="t">string or integer</span></td>
                    <td>Distinct phase identifiers (called <span class="t">phase_id</span>'s) separated by commas can be optionally supplied to limit the search. This is convenient for programmatic chained searches. A relevant <span class="t">q</span> parameter must be always given. The count of <span class="t">phase_id</span>'s cannot exceed <span class="t">1000</span>.</td>
                    </tr>
                    <tr>
                    <td><span class="t">pagesize</span></td>
                    <td><span class="t">integer</span></td>
                    <td>The maximum number of hits per a single response (pagination). Default value: <span class="t">10</span>. Allowed values: <span class="t">10</span>, <span class="t">100</span>, <span class="t">500</span>, and <span class="t">1000</span>.</td>
                    </tr>
                    <tr>
                    <td><span class="t">page</span></td>
                    <td><span class="t">integer</span></td>
                    <td>The page number, either in the selected or in the default pagination. Counts from <span class="t">0</span>. Defaults to the first page, which has number <span class="t">0</span>, <i>i.e.</i> the default value is <span class="t">0</span>.</td>
                    </tr>
                    <tr>
                    <td><span class="t">fmt</span></td>
                    <td><span class="t">integer</span></td>
                    <td>Output data format. Can be <span class="t">json</span> or <span class="t">cif</span>. The latter <span class="t">cif</span> only makes sense for <strong>crystalline structures</strong>. Default value: <span class="t">json</span>.</td>
                    </tr>
                </tbody>
            </table>

            <div class="caption"><b>Table 2.</b> Query string parameters for the download endpoint.</div>

            <p class="view">An example of the <span class="t">q</span> parameter to request the <strong>crystalline structures</strong> (with the spaces and line breaks added for readability):</p>

            <div class="blackbg view">{
    "elements": "Sr-Ti-O",
    "classes": "perovskite, conductor",
    "sgs": "Pm-3m",
    "props": "structural properties"
}</div>

            <p class="view">Another example of the <span class="t">q</span> parameter to request the <strong>physical properties</strong>:</p>

            <div class="blackbg view">{
    "elements": "Zr",
    "classes": "oxide",
    "props": "thermal expansion"
}</div>

            <p class="view">By default the response has <span class="t">json</span> format, containing the following properties: <span class="t">out</span> (list <i>i.e.</i> array of the MPDS entries), <span class="t">npages</span> (number of pages in the selected or default pagination), <span class="t">page</span> (current page number), <span class="t">count</span> (total number of hits), and <span class="t">error</span> (should be <span class="t">null</span>).</p>

            <p class="view">Each kind of entries (<i>i.e.</i> S- or P-entries) has its own specific properties in <strong>JSON</strong> (see below).</p>

            <div class="blackbg view">{
    "error": null,
    "out": [
        {
            "entry_one_properties": "entry_one_values"
        },
        {
            "entry_two_properties": "entry_two_values"
        }
    ],
    "npages": 1,
    "page": 0,
    "count": 2
}</div>

            <p class="view">And if no results are found:</p>

            <div class="blackbg view">{
    "error": null,
    "out": [],
    "npages": 0,
    "count": 0,
    "page": 0
}</div>

            <p class="view">The output in <span class="t">cif</span> format presents nothing more than concatenated <strong>CIF</strong>s in plain text.</p>

            <p class="view">The response for a correctly understood request will always have the status code <span class="t">200</span>, whereas the status codes <span class="t">400</span> ("Wrong parameters") or <span class="t">403</span> ("Forbidden") may signal about an error in the request. Generally, checking the response status code should be always done first.</p>

            <h3 id="JSON-schemata">&sect;1.4. JSON schemata of the MPDS entries</h3>

            <p class="view">JSON is the first-class-passenger format in the MPDS API. We provide <a href="http://developer.mpds.io/mpds.schema.json">JSON schemata</a> for all kinds of the MPDS entries in the API output. This is visualized below:</p>

            <div id="schema_crystal_structure" class="view"></div>

            <div class="caption"><b>Fig. 1.</b> Interactive JSON schema for a <strong>crystalline structure</strong> or <strong>S-entry</strong>.</div>

            <div id="schema_physical_property" class="view"></div>

            <div class="caption"><b>Fig. 2.</b> Interactive JSON schema for a <strong>physical property</strong> or <strong>P-entry</strong> (clickable).</div>

            <div id="schema_phase_diagram" class="view"></div>

            <div class="caption"><b>Fig. 3.</b> Interactive JSON schema for a <strong>phase diagram</strong> or <strong>C-entry</strong>.</div>

            <p class="view">Any MPDS API JSON output can be validated against the above schemata <i>e.g.</i> using a Python script below. In the following example the external <span class="t">httplib2</span> and <span class="t">jsonschema</span> Python packages are used:</p>

            <div id="json_validate" class="view">
            <pre><code>#!/usr/bin/env python

import sys
import json
import httplib2
from jsonschema import validate, Draft4Validator
from jsonschema.exceptions import ValidationError

try: input_json = sys.argv[1]
except IndexError: sys.exit("Usage: %s input_json" % sys.argv[0])

network = httplib2.Http()
response, content = network.request("http://developer.mpds.io/mpds.schema.json")
assert response.status == 200

schema = json.loads(content)
Draft4Validator.check_schema(schema)

target = json.loads(open(input_json).read())

if not target.get("npages") or not target.get("out") or target.get("error"):
    sys.exit("Unexpected API response")

try:
    validate(target["out"], schema)
except ValidationError, e:
    raise RuntimeError(
        "The item: \r\n\r\n %s \r\n\r\n has an issue: \r\n\r\n %s" % (
            e.instance, e.context
        )
    )

            </code></pre>
            </div>

            <div class="caption view"><b>Listing 1.</b> A Python console script for JSON validation.</div>

            <p class="view">All MPDS data are expected to be valid against the supplied schemata.</p>

            <h3 id="Example-scripts">&sect;1.5. Example scripts</h3>

            <p class="view">Below are simple examples for the MPDS data retrieval in two programming languages: <strong>Python</strong> and <strong>JavaScript</strong>. More languages could be added by request. Note, that here the Python example requires an external package <span class="t">httplib2</span>. Below we provide more convenient Python client library, so these examples here serve demonstration purposes only.</p>

            <div id="example_python" class="view">
            <pre><code>#!/usr/bin/env python

from urllib import urlencode
import httplib2
import json


api_key = "" # your key
endpoint = "https://api.mpds.io/v0/download/facet"
search = {
    "elements": "Mn",
    "classes": "binary, oxide",
    "props": "isothermal bulk modulus", # see https://mpds.io/#hierarchy
    "lattices": "cubic"
}

req = httplib2.Http()
response, content = req.request(
    uri=endpoint + '?' + urlencode({
        'q': json.dumps(search),
        'pagesize': 10
    }),
    method='GET',
    headers={'Key': api_key}
)

if response.status != 200:
    # NB 400 means wrong input, 403 means authorization issue etc.
    # see https://en.wikipedia.org/wiki/List_of_HTTP_status_codes
    raise RuntimeError("Error code %s" % response.status)

content = json.loads(content)

if content.get('error'): raise RuntimeError(content['error'])

print "OK, got %s hits" % len(content['out'])
            </code></pre>
            </div>

            <div class="caption view"><b>Listing 2.</b> Sample Python script for working with the MPDS API.</div>

            <div id="example_js" class="view">
            <pre><code>#!/usr/bin/env node

var https = require('https');
var qs = require('querystring');

var api_key = ""; // your key
var host = "api.mpds.io", port = 443, path = "/v0/download/facet";
var search = {
    "elements": "Mn",
    "classes": "binary, oxide",
    "props": "isothermal bulk modulus", // see https://mpds.io/#hierarchy
    "lattices": "cubic"
};

https.request({
    host: host,
    port: port,
    path: path + '?' + qs.stringify({q: JSON.stringify(search), pagesize: 10}),
    method: 'GET',
    headers: {'Key': api_key}
}, function(response){
    var result = '';
    if (response.statusCode != 200){
        // NB 400 means wrong input, 403 means authorization issue etc.
        // see https://en.wikipedia.org/wiki/List_of_HTTP_status_codes
        return console.error('Error code: ' + response.statusCode);
    }
    response.on('data', function(chunk){
        result += chunk;
    });
    response.on('end', function(){
        result = JSON.parse(result);
        if (result.error) console.error(result.error);
        else {
            console.log('OK, got ' + result.out.length + ' hits');
        }
    });
}).on('error', function(err){
    console.error('Network error: ' + err);
}).end();
            </code></pre>
            </div>

            <div class="caption view"><b>Listing 3.</b> Sample JavaScript code for working with the MPDS API.</div>

            <h3 id="API-GUI">&sect;1.6. API and GUI</h3>

            <p class="view">The MPDS data provided in API and <a href="https://mpds.io/#start">GUI</a> (graphical user interface) are generally the same. There are however two important points to consider.</p>

            <p class="view">First, the GUI is intended for the human researchers, not for the automated processing. Therefore the data in GUI are less formatted, being thus closer to the original publications (which, of course, impedes machine analysis).</p>

            <p class="view">Second, some portion of data (~10%) present in the GUI is absent in the API. This is because currently a number of MPDS entries has only textual content or even no content at all (in process of preparation), <i>i.e.</i> present little value for the data mining. However, we make our best to expose the maximum MPDS data in the API, and this is the work in progress.</p>


            <h2 id="Processing-data">&sect;2. Processing data</h2>

            <h3 id="Overview-2">&sect;2.1. Overview</h3>

            <p class="view">To facilitate starting with the MPDS API we provide several exercises (or miniature case studies): distribution density analysis, clustering and correlation search. To a certain extent they could be considered as recipes, however they aim to illustrate the informatics aspect, not the materials science aspect.</p>

            <p class="view">All the exercises discussed here can be found in the <a href="https://github.com/mpds-io/API/tree/gh-pages/kickoff">Github repository</a>.</p>

            <h3 id="Client-library">&sect;2.2. Client library</h3>

            <p class="view">As mentioned, any programming language, able to execute HTTP requests and handle the JSON output, can be employed. However, one of the most frequently used languages in data processing is Python. Therefore we provide a <a href="https://github.com/mpds-io/API/tree/gh-pages/kickoff/mpds_client">client library</a> for Python version 2.7 and 3.6, taking care of many aspects of the MPDS API, such as pagination, error handling, validation, proper data extraction and more. We encourage our users to adopt this library for their needs.</p>

            <p class="view">The exercises below use this client library. Some of them might also employ <span class="t">numpy</span>, <span class="t">scipy</span>, and <span class="t">pandas</span> libraries (a popular data science toolbox). As a necessary preparation, we save the MPDS API key in an environment of our terminal session. Later the Python client reads the key from there, if it is not explicitly provided. For Bash:</p>

            <div class="blackbg">export MPDS_KEY=...</div>

            <h3 id="Probability-density">&sect;2.3. Bond length analysis</h3>

            <p class="view">Let us say we want to study the chemical bond of A and B elements, <i>e.g.</i> uranium and oxygen. What is the length or lengths of this bond the most frequently reported in the world literature? MPDS contains more than 2500 crystalline structures with uranium and oxygen, so why should not we perform a quick data investigation to answer this question. Doing the necessary imports in Python:</p>

            <div id="exercise_a1" class="view">
            <pre><code>#!/usr/bin/env python
import pandas as pd
from mpds_client import MPDSDataRetrieval</code></pre>
            </div>

            <p class="view">We use a naive brute-force approach to calculate bond lengths between particular atom types in a crystalline environment. Obviously, we are interested in neighboring atoms only, so we do not consider interatomic distances more than, let us say, 4 &#8491;. We then represent a crystalline structure with the <span class="t">ase</span>'s <span class="t">Atoms</span> class and calculate distances using its <span class="t">get_distance</span> method. Note rounding of distances marked by comment <i>NB</i> in the code:</p>

            <div id="exercise_a2" class="view">
            <pre><code>def calculate_lengths(ase_obj, elA, elB, limit=4):
    assert elA != elB
    lengths = []
    for n, atom in enumerate(ase_obj):
        if atom.symbol == elA:
            for m, neighbor in enumerate(ase_obj):
                if neighbor.symbol == elB:
                    dist = round(ase_obj.get_distance(n, m), 2) # NB occurrence <-> rounding
                    if dist < limit:
                        lengths.append(dist)
    return lengths</code></pre>
            </div>

            <p class="view">
            Note that the crystalline structures are not retrieved from MPDS by default, so we need to specify additional five fields: <span class="t">cell_abc</span>, <span class="t">sg_n</span>, <span class="t">setting</span>, <span class="t">basis_noneq</span>, <span class="t">els_noneq</span>.

            On top of that, we also ask for the <span class="t">phase_id</span>'s, MPDS entry numbers, and chemical formulae. Note that <span class="t">get_data</span> API client method returns a usual Python list, whereas <span class="t">get_dataframe</span> API client method returns a Pandas dataframe. We use the former below:
            </p>

            <div id="exercise_a3" class="view">
            <pre><code>client = MPDSDataRetrieval()

answer = client.get_data(
    {"elements": "U-O", "props": "atomic structure"},
    fields={'S':[
            'phase_id',
            'entry',
            'chemical_formula',
            'cell_abc',
            'sg_n',
            'setting',
            'basis_noneq',
            'els_noneq'
            ]}
)</code></pre>
            </div>

            <p class="view">
            The <span class="t">MPDSDataRetrieval.compile_crystal</span> API client method helps us to handle the crystalline structure in the <span class="t">ase</span>'s <span class="t">Atoms</span> flavour. Of course, any other library (<i>e.g.</i> <a href="https://github.com/materialsproject/pymatgen">Pymatgen</a> or <a href="https://github.com/aiidateam/aiida_core">Aiida</a>) can be used instead. We then call the <span class="t">calculate_lengths</span> function defined earlier.
            </p>

            <div id="exercise_a4" class="view">
            <pre><code>lengths = []

for item in answer:
    crystal = MPDSDataRetrieval.compile_crystal(item)
    if not crystal: continue
    lengths.extend( calculate_lengths(crystal, 'U', 'O') )</code></pre>
            </div>

            <p class="view">
            That runs a little bit slow (about five minutes), since <span class="t">ase</span>'s <span class="t">Atoms</span> are expectedly not performing very well on dozens of thousands of bond length calculations. We may want to employ a C-extension here, but this is outside the scope of this exercise. Anyway now we have a flat list <span class="t">lengths</span>. Let's convert it into a Pandas Dataframe and find which <strong>U-O</strong> distances occur more often than the others.
            </p>

            <div id="exercise_a5" class="view">
            <pre><code>dfrm = pd.DataFrame(sorted(lengths), columns=['length'])
dfrm['occurrence'] = dfrm.groupby('length')['length'].transform('count')
dfrm.drop_duplicates('length', inplace=True)</code></pre>
            </div>

            <p class="view">
            What did we do here? We calculated the numbers of occurrences (counts) of each particular <strong>U-O</strong> length and then augmented our dataframe with this new information, creating a new column <span class="t">occurrence</span>. The reader remembers that we have rounded the interatomic distances calculated.
            </p>

            <p class="view">
            Now it's up to the reader to visualize the result (this is absolutely a matter of taste). Below is a bar chart rendered using <a href="https://plot.ly">Plotly</a> and <a href="https://d3js.org">D3</a> JavaScript libraries. We provide <a href="#Visualizations">visualization exporting toolbox</a> in Python, allowing the export of the results into <strong>CSV</strong> and <strong>JSON</strong> formats and reproducing the figures, although its usage is optional.
            </p>

            <img src="/figures/1.png" alt="Probability density distribution of U-O bond length across the MPDS database" width="800" />

            <div class="caption"><b>Fig. 4.</b> Distribution of U-O bond lengths across the MPDS database.</div>

            <p class="view">
            We can see now that the most frequent bond lengths between the neighboring uranium and oxygen atoms are 1.78 and 2.35 &#8491;. This excellently agrees with the well-known <a href="http://canmin.geoscienceworld.org/content/35/6/1551">study of Burns <i>et al.</i></a>, done in 1997. However, Burns considered only 105 structures, and we did more than 2500, confirming very well although his findings on the <a href="https://en.wikipedia.org/wiki/Uranyl">uranyl ion</a> geometry.
            </p>

            <h3 id="Clustering">&sect;2.4. Clustering the band gaps</h3>

            <p class="view">
            Unsupervised grouping the values into the clusters in a many-dimensional space is a classical mathematical problem. In an applied data science it is successfully managed using <i>e.g.</i> such algorithms as <a href="https://en.wikipedia.org/wiki/K-means_clustering"><i>k</i>-means</a> and <a href="http://scikit-learn.org/stable/modules/mixture.html">Gaussian mixtures</a>.
            </p>

            <p class="view">
            Taking the non-conducting binary compounds, let us try to find the clusters in their band gaps and the periodic groups of their elements. That is, we obtain the band gaps and corresponding pairs of the chemical elements, forming a binary compound, and then, for the series of values <strong>group of the first element</strong> &mdash; <strong>group of the second element</strong> &mdash; <strong>band gap</strong> we apply <i>k</i>-means. Given a set of points (in our case, in a three-dimensional space), <i>k</i>-means aims to partition the points into a number of sets, in order to minimize the within-cluster sum of distance functions of each point to the cluster center.
            </p>

            <p class="view">Here we explicitly specify some fields of P-entries we are interested in. As said, all the fields are given in the <a href="#JSON-schemata">JSON schema</a>. Filtering by the units (eV), we get rid of some band gap derivatives, which are also present in the output. Then we remove a couple of unphysical values (negative or more than 20 eV) that are probably wrongly reported:</p>

            <div id="exercise_b1" class="view">
            <pre><code>#!/usr/bin/env python
from ase.data import chemical_symbols
from retrieve_MPDS import MPDSDataRetrieval
from kmeans import Point, kmeans, k_from_n # standalone K-means implementation

client = MPDSDataRetrieval()

dfrm = client.get_dataframe(
    {"classes": "binary", "props": "band gap"},
    fields={'P': [
        'sample.material.chemical_formula',
        'sample.material.chemical_elements',
        'sample.material.condition[0].scalar[0].value',
        'sample.measurement[0].property.units',
        'sample.measurement[0].property.scalar'
    ]},
    columns=['Formula', 'Elements', 'SG', 'Units', 'Bandgap']
)
dfrm = dfrm[dfrm['Units'] == 'eV']
dfrm = dfrm[(dfrm['Bandgap'] > 0) & (dfrm['Bandgap'] < 20)]</code></pre></div>

            <p class="view">
            Note, that there might be different values of the band gaps reported in the literature for each particular compound. Clearly, this is because we have not specified the character of the desired values (direct or indirect band gap), but even apart of that variations are expected, <i>e.g.</i> due to slightly different experimental conditions. Here we simply take the average of all the values per a compound, although there are of course better ways to handle that:
            </p>

            <div id="exercise_b2" class="view">
            <pre><code>avgbgfrm = dfrm.groupby('Formula')['Bandgap'].mean().to_frame().reset_index() \
    .rename(columns={'Bandgap': 'AvgBandgap'})
dfrm = dfrm.merge(avgbgfrm, how='outer', on='Formula')
dfrm.drop_duplicates('Formula', inplace=True)</code></pre></div>

            <p class="view">We now have almost 600 different binary compounds with the averaged band gap values. So our data are ready for clustering. But first let us define how do we get the periodic element groups:</p>

            <div id="exercise_b3" class="view"><pre><code>def get_element_group(el_num):
    if el_num == 1: return 1
    elif el_num == 2: return 18

    elif 2 < el_num < 19:
        if (el_num - 2) % 8 == 0: return 18
        elif (el_num - 2) % 8 <= 2: return (el_num - 2) % 8
        else: return 10 + (el_num - 2) % 8

    elif 18 < el_num < 55:
        if (el_num - 18) % 18 == 0: return 18
        else: return (el_num - 18) % 18

    if 56 < el_num < 72: return 3 # custom group for lanthanoids
    elif 88 < el_num < 104: return 3 # custom group for actinoids
    elif (el_num - 54) % 32 == 0: return 18
    elif (el_num - 54) % 32 >= 17: return (el_num - 54) % 32 - 14
    else: return (el_num - 54) % 32</code></pre></div>

            <p class="view">
            And then:
            </p>

            <div id="exercise_b4" class="view"><pre><code>fitdata = []

for n, row in dfrm.iterrows():
    groupA, groupB = \
        get_element_group(chemical_symbols.index(row['Elements'][0])), \
        get_element_group(chemical_symbols.index(row['Elements'][1]))
    fitdata.append(
        Point(
            sorted([groupA, groupB]) + [round(row['AvgBandgap'], 2)],
            reference=row['Formula']
        )
    )
clusters = kmeans(fitdata, k_from_n(len(fitdata)))</code></pre></div>

            <p class="view">We use a <a href="https://github.com/mpds-io/API/tree/gh-pages/kickoff/kmeans.py">standalone</a> <i>k</i>-means Python implementation <span class="t">kmeans</span>, although the reader might want to employ <span class="t">sklearn</span> or <span class="t">scipy</span>. Note, that the <i>k</i>-means algorithm does not provide the number of clusters to divide our data. We try to guess this number from the size of our data naively using <span class="t">k_from_n</span> function. For homogeneous data this guess is likely to be wrong, but for heterogeneous data it should make sense.</p>

            <p class="view">We then export the data in a flat Python list for plotting as follows. The plot below is prepared using the <a href="#Visualizations">visualization exporting toolbox</a>.</p>

            <div id="exercise_b5" class="view"><pre><code>export_data = []

for cluster_n, cluster in enumerate(clusters, start=1):
    for pnt in cluster.points:
        export_data.append(pnt.coords + [pnt.reference] + [cluster_n])</code></pre></div>

            <br />

            <img src="/figures/2.png" alt="Binary compounds clustering by their band gaps and constituent element groups" width="600" />

            <div class="caption"><b>Fig. 5.</b> Binary compounds clustering by their band gaps and constituent element groups.</div>

            <br />

            <h3 id="QSAR-QSPR">&sect;2.5. Structure-property correlations</h3>

            <p class="view">In this excercise we try to quantitatively estimate the relationship between a physical property of interest and the atomic structure. This is the very basic task in chemoinformatics, called QSAR/QSPR study, which stands for the quantitative structure-activity or structure-property relationship modeling. Technically, we request some physical property from MPDS and try to figure out, whether it depends on the crystalline structure, and if yes, how much.</p>

            <p class="view">Here the question "how much" is answered by a correlation coefficient, which can be defined either as a measure of how well two datasets fit on a straight line (<a href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient">Pearson coefficient</a>), or difference between concordant and discordant pairs among all possible pairs in two datasets (<a href="https://en.wikipedia.org/wiki/Kendall_rank_correlation_coefficient">Kendall's tau coefficient</a>). Both Pearson and Kendall's tau correlation coefficients are defined between <span class="t">-1</span> and <span class="t">+1</span>, with <span class="t">0</span> implying no correlation. For the Pearson coefficient, values of <span class="t">-1</span> or <span class="t">+1</span> imply an exact linear relationship. Positive correlations imply that as <i>x</i> increases, so does <i>y</i>. Negative correlations imply that as <i>x</i> increases, <i>y</i> decreases. For the Kendall's tau coefficient, values close to <span class="t">+1</span> indicate strong agreement, values close to <span class="t">-1</span> indicate strong disagreement. Calculation of both these correlation coefficients is provided by <span class="t">pandas</span> Python library.</p>

            <p class="view">As usual, we start with Python imports:</p>

            <div id="exercise_c1" class="view"><pre><code>#!/usr/bin/env python
from __future__ import division

import numpy as np
import pandas as pd
from ase.data import chemical_symbols, covalent_radii

from retrieve_MPDS import MPDSDataRetrieval</code></pre></div>

            <p class="view">We then present two <i>descriptors</i> for the crystalline structures. The term <i>descriptor</i> stands for the way how the complex data (crystalline structures, in our case) are transformed into the compact information-rich numbers, allowing the convenient mathematical treatment of the encoded information. We employ an <a href="https://en.wikipedia.org/wiki/Atomic_packing_factor">APF</a> descriptor, as well as topological <a href="https://en.wikipedia.org/wiki/Wiener_index">Wiener index</a>, defined per a unit cell. It is up to the reader to decide, whether the <a href="https://doi.org/10.1103/PhysRevB.89.205118">other descriptors</a> could be also employed:</p>

            <div id="exercise_c2" class="view"><pre><code>def get_APF(ase_obj):
    volume = 0.0
    for atom in ase_obj:
        volume += 4/3 * np.pi * covalent_radii[chemical_symbols.index(atom.symbol)]**3
    return volume/abs(np.linalg.det(ase_obj.cell))

def get_Wiener(ase_obj):
    return np.sum(ase_obj.get_all_distances()) * 0.5</code></pre></div>

            <p class="view">Concerning the property being investigated, we restrict ourselves with some materials classes, in order to reduce the time needed for descriptor calculations:</p>

            <div id="exercise_c3" class="view"><pre><code>client = MPDSDataRetrieval()

dfrm = client.get_dataframe({
    "classes": "transitional, oxide",
    "props": "isothermal bulk modulus"
})
dfrm = dfrm[np.isfinite(dfrm['Phase'])]
dfrm = dfrm[dfrm['Units'] == 'GPa'] # cleaning
dfrm = dfrm[dfrm['Value'] > 0] # cleaning

phases = set(dfrm['Phase'].tolist())
answer = client.get_data(
    {"props": "atomic structure"},
    phases=phases,
    fields={'S':[
            'phase_id',
            'entry',
            'chemical_formula',
            'cell_abc',
            'sg_n',
            'setting',
            'basis_noneq',
            'els_noneq'
            ]}
)
descriptors = []

for item in answer:
    crystal = MPDSDataRetrieval.compile_crystal(item)
    if not crystal: continue
    descriptors.append(( item[0], get_APF(crystal), get_Wiener(crystal) ))

descriptors = pd.DataFrame(descriptors, columns=['Phase', 'APF', 'Wiener'])</code></pre></div>

            <p class="view">Now we have got the physical property values in the <span class="t">dfrm</span> dataframe and the structure descriptors in the <span class="t">descriptors</span> dataframe. The reader remembers that in MPDS the physical properties and crystalline structures are related via the distinct phase concept, <i>i.e.</i> the same phase identifiers, which we have providently saved in the <span class="t">Phase</span> columns of <span class="t">dfrm</span> and <span class="t">descriptors</span> dataframes. As the MPDS might have several crystalline structures per a physical property value (or vice versa), we take an average (mean) of all the respective quantities within a distinct phase. After that we join our dataframes using the <span class="t">Phase</span> column.</p>

            <div id="exercise_c4" class="view"><pre><code>d1 = descriptors.groupby('Phase')['APF'].mean().to_frame().reset_index()
d2 = descriptors.groupby('Phase')['Wiener'].mean().to_frame().reset_index()
dfrm = dfrm.groupby('Phase')['Value'].mean().to_frame().reset_index()

dfrm = dfrm.merge(d1, how='outer', on='Phase')
dfrm = dfrm.merge(d2, how='outer', on='Phase')

dfrm.drop('Phase', axis=1, inplace=True)
dfrm.rename(columns={'Value': 'Prop'}, inplace=True)</code></pre></div>

            <p class="view">And this is how both correlation coefficients are calculated:</p>

            <div id="exercise_c5" class="view"><pre><code>corr_pearson = dfrm.corr(method='pearson')
corr_kendall = dfrm.corr(method='kendall')

print("Pearson. Prop vs. APF = \t%s" % corr_pearson.loc['Prop']['APF'])
print("Pearson. Prop vs. Wiener = \t%s" % corr_pearson.loc['Prop']['Wiener'])
print("Kendall Tau. Prop vs. APF = \t%s" % corr_kendall.loc['Prop']['APF'])
print("Kendall Tau. Prop vs. Wiener = \t%s" % corr_kendall.loc['Prop']['Wiener'])</code></pre></div>

            <p class="view">Expectedly, we can see some correlation between the selected property (namely, <i>isothermal bulk modulus</i> for the <i>oxides of transitional elements</i>) and two structural descriptors. However it varies considerably with the different materials classes, since the crystalline structure also changes considerably. Using your intuition, could you suggest the <a href="https://mpds.io/#hierarchy">physical property</a> which is expected to show higher correlation with either of two structural descriptors within a certain materials class &mdash; or no correlation at all?</p>

            <br />

            <h3 id="Visualizations">&sect;2.6. Visualizations</h3>

            <p class="view">Although the reader is encouraged to visualize the data using his habitual tools, we provide a set of helper utilities. Using a <a href="https://github.com/mpds-io/API/tree/gh-pages/kickoff/MPDSExport.py">simple exporting toolbox</a> each of the exercises considered above may output in the end two files for the further plotting: <strong>CSV</strong> and <strong>JSON</strong>. By default these files are written in a system-wide temporary directory <span class="t">/tmp</span> (subdirectory <span class="t">_MPDS</span>). <strong>CSV</strong> is commonly used in the electronic sheets (such as OpenOffice Calc or Excel), and <strong>JSON</strong> has a custom layout suitable for <a href="https://mpds.io/visavis">Vis-&agrave;-vis web-viewer</a>. This is quite unsophisticated browser-based JavaScript application, heavily used inside the MPDS GUI. It employs <a href="https://plot.ly">Plotly</a> and <a href="https://d3js.org">D3</a> visualization libraries. <strong>JSON</strong> produced with the exporting toolbox may be simply drag-n-dropped in the browser window with the loaded <a href="https://mpds.io/visavis">Vis-&agrave;-vis</a>.</p>

            <p style="background:#DBF2FF;">Thanks for your time and interest! Please do not hesitate to <a href="mailto:feedback@tilde.pro">contact us</a> if you have any feedback or questions.</p>
        </div>
    </div>

    <div id="logo_bg"></div>

    <div id="twitter"><a href="https://twitter.com/mpdsio" target="_blank" rel="noopener noreferrer">Twitter @mpdsio</a></div>

    <div id="footer">Created by <a href="http://paulingfile.com" target="_blank">Materials Phase Data System</a> and <a href="https://tilde.pro" target="_blank">Tilde Materials Informatics</a>.</div>

    <div class="github-fork-ribbon-wrapper right">
        <div class="github-fork-ribbon">
            <a href="https://github.com/mpds-io/API" target="_top">See on GitHub</a>
        </div>
    </div>
</body>
</html>
